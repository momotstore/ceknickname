<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Motmot Store - Game Checker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        glass: 'rgba(30, 41, 59, 0.7)',
                        glassBorder: 'rgba(255, 255, 255, 0.08)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #020617;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        /* Glassmorphism Effect */
        .glass-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .form-control {
            background-color: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.2);
            color: #f1f5f9;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            background-color: rgba(30, 41, 59, 0.8);
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15);
            outline: none;
        }
        
        select.form-control option {
            background-color: #0f172a;
            color: #e2e8f0;
        }

        .btn-gradient {
            background: linear-gradient(135deg, #4f46e5 0%, #3b82f6 100%);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5);
            filter: brightness(1.1);
        }

        .btn-gradient:active {
            transform: translateY(0);
        }

        /* Sidebar Styling */
        .sidebar {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            height: 100%;
            width: 280px;
            top: 0;
            right: -280px;
            z-index: 1000;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar.active {
            right: 0;
        }

        .hamburger-button {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .hamburger-button span {
            background-color: #e2e8f0;
            height: 2px;
            width: 20px;
            border-radius: 2px;
        }

        /* Overlay */
        .overlay {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(3px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }
    </style>
</head>
<body class="antialiased selection:bg-indigo-500 selection:text-white">
    
    <div class="hamburger-button fixed top-5 right-5 z-50 w-10 h-10 rounded-xl flex flex-col justify-center items-center gap-1.5 cursor-pointer hover:bg-white/10 transition-colors" id="hamburgerButton">
        <span></span>
        <span></span>
        <span></span>
    </div>
    
    <div class="sidebar shadow-2xl p-6 flex flex-col" id="sidebar">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h2 class="text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent">Motmot Store</h2>
                <p class="text-xs text-slate-400 mt-1">Api Stalk Game</p>
            </div>
            <i class="fas fa-times text-slate-400 cursor-pointer hover:text-white text-lg" onclick="toggleSidebar()"></i>
        </div>
        
        <div class="flex flex-col gap-2">
            <a href="/dokumentasi" class="flex items-center gap-3 p-3 rounded-lg text-slate-300 hover:bg-white/10 hover:text-white transition-all group">
                <i class="fas fa-book text-indigo-400 group-hover:scale-110 transition-transform"></i>
                <span class="font-medium">Dokumentasi</span>
            </a>
            <a href="/endpoint" class="flex items-center gap-3 p-3 rounded-lg text-slate-300 hover:bg-white/10 hover:text-white transition-all group">
                <i class="fas fa-network-wired text-indigo-400 group-hover:scale-110 transition-transform"></i>
                <span class="font-medium">Visit Endpoint</span>
            </a>
        </div>

        <div class="mt-auto pt-6 border-t border-slate-700">
            <p class="text-xs text-center text-slate-500">&copy; 2025 Motmot Store</p>
        </div>
    </div>
    
    <div class="overlay fixed inset-0 z-40" id="overlay" onclick="toggleSidebar()"></div>

    <div class="w-full flex justify-center py-12 md:py-20 px-4">
        <div class="w-full max-w-lg flex flex-col gap-8">
            
            <div class="text-center space-y-2">
                <div class="inline-flex items-center justify-center p-3 bg-indigo-500/10 rounded-2xl mb-2 border border-indigo-500/20 shadow-lg shadow-indigo-500/5">
                    <i class="fas fa-gamepad text-3xl text-indigo-400"></i>
                </div>
                <h1 class="text-3xl font-bold text-white tracking-tight">Motmot Store</h1>
                <p class="text-slate-400 text-sm">Game ID Checker & Verification</p>
            </div>
            
            <div class="glass-card p-6 md:p-8 rounded-2xl relative overflow-hidden">
                <div class="absolute -top-24 -right-24 w-48 h-48 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
                <div class="absolute -bottom-24 -left-24 w-48 h-48 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10"></div>
                
                <div class="flex items-center gap-3 mb-6 relative z-10 border-b border-white/5 pb-4">
                    <div class="p-2 bg-indigo-500/10 rounded-lg border border-indigo-500/20">
                        <i class="fas fa-search text-indigo-400"></i>
                    </div>
                    <h2 class="text-lg font-semibold text-white">Cari Data Akun</h2>
                </div>

                <form action="" class="flex flex-col gap-5 relative z-10">
                    <div class="form-group space-y-2">
                        <label for="game" class="block text-xs font-medium text-slate-400 uppercase tracking-wider ml-1">Nama Game</label>
                        <div class="relative">
                            <select name="game" id="game" class="form-control w-full p-3.5 rounded-xl appearance-none cursor-pointer">
                                <option value="" disabled selected>Pilih Game...</option>
                            </select>
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-1 gap-5" id="input-container">
                        <div class="form-group space-y-2">
                            <label for="id" class="block text-xs font-medium text-slate-400 uppercase tracking-wider ml-1">ID Game</label>
                            <input type="text" name="id" id="id" class="form-control w-full p-3.5 rounded-xl" placeholder="Contoh: 12345678" />
                        </div>
                    </div>

                    <div class="form-group" id="zone-form"></div>

                    <button type="submit" class="btn-gradient mt-2 py-3.5 px-4 rounded-xl text-white font-semibold tracking-wide flex items-center justify-center gap-2 group">
                        <i class="fas fa-bolt group-hover:animate-pulse"></i>
                        <span>Periksa ID Sekarang</span>
                    </button>
                </form>
            </div>
            
            <div class="glass-card p-6 md:p-8 rounded-2xl hidden transform transition-all duration-300" id="result"></div>
            
            <div class="text-center">
                <p class="text-slate-600 text-xs font-medium">&copy; 2025 Motmot Store.</p>
            </div>
        </div>
    </div>
    
    <script>
        // Sidebar functionality
        const hamburgerButton = document.getElementById('hamburgerButton');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        
        function toggleSidebar() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }
        
        hamburgerButton.addEventListener('click', toggleSidebar);

        // Game Logic Code
        document.querySelector('#result').classList.add('hidden');
        const game = document.querySelector('#game');
        
        // Fetch Game List
        (async () => {
            const res = await fetch('/endpoint');
            try {
                const data = await res.json();
                data.data.forEach((item) => {
                    const option = document.createElement('option');
                    option.value = item.endpoint;
                    option.textContent = item.name;
                    option.setAttribute('data-isZone', item.hasZoneId);
                    option.setAttribute('data-listZone', item.listZoneId);
                    game.appendChild(option);
                });
            } catch (error) {
                console.log(error);
            }
        })();

        // Handle Game Change & Zone Logic
        game.addEventListener('change', (e) => {
            const option = e.target.options[e.target.selectedIndex];
            const isZone = option.getAttribute('data-isZone');
            const listZone = option.getAttribute('data-listZone');
            const zoneForm = document.querySelector('#zone-form');

            if (isZone == 'true' && listZone == 'null') {
                const zoneLabel = document.createElement('label');
                zoneLabel.className = 'block text-xs font-medium text-slate-400 uppercase tracking-wider ml-1 mb-2';
                
                zoneForm.innerHTML = `<input type="text" name="zone" id="zone" class="form-control w-full p-3.5 rounded-xl" placeholder="Masukkan Zone ID" />`;
                zoneForm.prepend(zoneLabel);
                zoneLabel.textContent = 'Zone ID';
            } else if (isZone == 'true' && listZone != 'null') {
                const getListZone = async () => {
                    zoneForm.innerHTML = '<div class="animate-pulse h-10 bg-slate-700 rounded-xl"></div>'; // Loading state
                    
                    const listZoneId = await fetch(`${option.getAttribute('data-listZone')}`);
                    try {
                        const listZoneIdJson = await listZoneId.json();
                        zoneForm.innerHTML = ''; 

                        const zone = document.createElement('select');
                        zone.className = 'form-control w-full p-3.5 rounded-xl appearance-none cursor-pointer';
                        zone.setAttribute('id', 'zone');
                        
                        const wrapper = document.createElement('div');
                        wrapper.className = 'relative';

                        const icon = document.createElement('div');
                        icon.className = 'absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400';
                        icon.innerHTML = '<i class="fas fa-chevron-down text-xs"></i>';

                        const zoneLabel = document.createElement('label');
                        zoneLabel.className = 'block text-xs font-medium text-slate-400 uppercase tracking-wider ml-1 mb-2';
                        zoneLabel.textContent = 'Pilih Zone';

                        listZoneIdJson.data?.forEach((item) => {
                            const option = document.createElement('option');
                            option.value = item.zoneId;
                            option.textContent = item.name;
                            zone.appendChild(option);
                        });

                        wrapper.appendChild(zone);
                        wrapper.appendChild(icon);
                        zoneForm.appendChild(zoneLabel);
                        zoneForm.appendChild(wrapper);
                    } catch (error) {
                        console.log(error.message);
                        zoneForm.innerHTML = '<p class="text-red-400 text-sm">Gagal memuat Zone ID</p>';
                    }
                };
                getListZone();
            } else {
                zoneForm.innerHTML = '';
            }
        });

        // Form Submit Handler
        const form = document.querySelector('form');
        const id = document.querySelector('#id');

        form.addEventListener('submit', (e) => {
            const resultBox = document.querySelector('#result');
            resultBox.classList.add('hidden');
            
            const button = document.querySelector('button');
            const originalBtnContent = button.innerHTML;
            
            button.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i><span>Processing...</span>';
            button.classList.add('opacity-70', 'cursor-not-allowed');
            button.setAttribute('disabled', 'disabled');

            e.preventDefault();

            if (e.target.id.value === '' || e.target.game.value === '' || (document.querySelector('#zone') && e.target.zone.value === '')) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'bg-red-500/10 border border-red-500/30 text-red-200 px-4 py-3 rounded-xl mb-4 text-sm flex items-center gap-3 backdrop-blur-md';
                errorDiv.innerHTML = '<i class="fas fa-exclamation-circle text-red-400"></i><span>Harap lengkapi ID Game dan Zone ID.</span>';
                
                form.prepend(errorDiv);
                setTimeout(() => {
                    errorDiv.remove();
                    button.innerHTML = originalBtnContent;
                    button.classList.remove('opacity-70', 'cursor-not-allowed');
                    button.removeAttribute('disabled');
                }, 2500);
            } else {
                (async () => {
                    const zoneVal = e.target?.zone?.value || '';
                    const res = await fetch(`${e.target.game.value}?id=${encodeURIComponent(e.target.id.value)}&zone=${zoneVal}`);
                    
                    try {
                        const data = await res.json();
                        
                        if (data.status) {
                            let resHtml = `
                            <div class="flex items-center justify-between mb-4 border-b border-white/10 pb-3">
                                <h3 class="text-lg font-semibold text-white">Detail Akun</h3>
                                <span class="px-2.5 py-1 bg-green-500/20 border border-green-500/30 text-green-300 text-xs font-bold rounded-lg flex items-center gap-1">
                                    <i class="fas fa-check-circle"></i> FOUND
                                </span>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-xl border border-white/5">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="p-3 bg-slate-900/50 rounded-lg border border-white/5">
                                        <span class="block text-xs text-slate-400 mb-1 uppercase tracking-wide">Username</span>
                                        <span class="text-sm font-semibold text-white break-words">${data.data?.username}</span>
                                    </div>
                                    <div class="p-3 bg-slate-900/50 rounded-lg border border-white/5">
                                        <span class="block text-xs text-slate-400 mb-1 uppercase tracking-wide">ID Game</span>
                                        <span class="text-sm font-semibold text-indigo-300 font-mono">${data.data?.user_id}</span>
                                    </div>
                                    <div class="p-3 bg-slate-900/50 rounded-lg border border-white/5">
                                        <span class="block text-xs text-slate-400 mb-1 uppercase tracking-wide">Zone / Server</span>
                                        <span class="text-sm font-semibold text-white">${data.data?.zone_id || '-'}</span>
                                    </div>
                                </div>
                            </div>`;
                            resultBox.innerHTML = resHtml;
                            resultBox.classList.remove('hidden');
                        } else {
                            let resHtml = `
                            <div class="flex items-center justify-between mb-4 border-b border-white/10 pb-3">
                                <h3 class="text-lg font-semibold text-white">Hasil Pencarian</h3>
                                <span class="px-2.5 py-1 bg-red-500/20 border border-red-500/30 text-red-300 text-xs font-bold rounded-lg flex items-center gap-1">
                                    <i class="fas fa-times-circle"></i> NOT FOUND
                                </span>
                            </div>
                            <div class="bg-red-500/5 p-4 rounded-xl border border-red-500/10 text-center">
                                <p class="text-sm text-red-200">${data.message}</p>
                            </div>`;
                            resultBox.innerHTML = resHtml;
                            resultBox.classList.remove('hidden');
                        }
                    } catch (error) {
                        console.log(error);
                        let resHtml = `
                        <div class="flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-200">
                            <i class="fas fa-wifi"></i>
                            <div class="flex flex-col">
                                <span class="font-bold text-sm">Connection Error</span>
                                <span class="text-xs opacity-80">Gagal terhubung ke server. Coba lagi nanti.</span>
                            </div>
                        </div>`;
                        resultBox.innerHTML = resHtml;
                        resultBox.classList.remove('hidden');
                    }
                    
                    button.innerHTML = originalBtnContent;
                    button.classList.remove('opacity-70', 'cursor-not-allowed');
                    button.removeAttribute('disabled');
                })();
            }
        });
    </script>
</body>
</html>
